{"version":3,"sources":["webpack:///./.linaria-cache/src/components/modals/TransactionDetailsModal/TransactionDetailsModal.linaria.css","webpack:///src/components/modals/TransactionDetailsModal/TransactionDetailsModal.tsx"],"names":["Wrapper","Header","Title","Date","CloseWrapper","CloseIcon","BlockWrapper","BlockIcon","Content","StatusWrapper","ValueCurrency","ValueOriginal","Status","FieldsWrapper","FieldWrapper","FieldRowWrapper","ColumnWrapper","FieldInfo","FieldTitle","FieldValue","AddressWrapper","AddressTitle","AddressValue","CopyIcon","CopyWrapper","Footer","ButtonExplorer","TransactionDetailsModal","close","dispatch","useDispatch","transaction","useSelector","state","Transaction","cluster","tokenAccounts","useEffect","mount","async","unwrapResult","getTransaction","setTimeout","isReceiver","useMemo","tokenAccount","date","dayjs","slot","title","onClick","name","prefix","symbol","value","size","shortAddress","navigator","ToastManager","error","console","href","getExplorerUrl","signature","target","rel","className","secondary"],"mappings":"0FAAA,Q,gNCkBA,MAAMA,EAAO,sDAaPC,EAAM,oDAQNC,EAAK,oDASLC,EAAI,mDAOJC,EAAY,0DAiBZC,EAAS,qDAOTC,EAAY,2DAgBZC,EAAS,sDAOTC,EAAO,sDAKPC,EAAa,2DAObC,EAAa,4DAObC,EAAa,2DASbC,EAAM,qDAgBNC,EAAa,2DAEbC,EAAY,0DAYZC,EAAe,yDAMfC,EAAa,0DAEbC,EAAS,wDAKTC,EAAU,wDAOVC,EAAU,yDAUVC,EAAc,6DAOdC,EAAY,2DAOZC,EAAY,2DASZC,EAAQ,qDAORC,EAAW,0DAsBXC,EAAM,qDASNC,EAAc,0DAoBPC,EAAoD,EAAC,YAAaC,YAAY,QACzF,MAAMC,EAAWC,cACXC,EAAcC,YACjBC,GACCA,wBAAsCC,SAAiBD,oBAF3D,KAIME,EAAUH,YAAaC,GAAUA,SAAvC,SACMG,EAAgBJ,YAAaC,GAAUA,SAA7C,eAEAI,oBAAU,KACR,MAAMC,EAAQC,UACAC,kBAAmBX,EAASY,YAAxC,MAGEC,WAAWJ,EAAXI,MAIJ,GACOJ,KAEN,CAZHD,IAcA,MAAMM,EAAaC,kBAAQ,IAClBR,OACJS,IAAD,aAAkBA,uBAAyBd,2BAAzBc,aAAyBd,EAD7C,cAGC,CAACA,QAAD,YAJH,IAMA,MACE,YAGF,MAAMe,EAAOf,YACTgB,SAAWhB,EAAXgB,kBADShB,OAENA,EAAYiB,KAAd,QAEL,OACE,yBACE,yBACE,yBAAQjB,QAAD,MACP,qBAAMkB,MAAUlB,EAAYiB,KAAd,SAA2B,GACzC,qBAAcE,QAAd,GACE,qBAAWC,KAAX,WAEF,yBACE,qBAAWA,KAAMR,EAAa,SAA9B,UAGJ,yBACE,yBACE,yBACE,uBACES,OAAQT,EAAa,IADvB,IAEEU,OAAA,UAAQtB,kCAAR,aAAQA,OAFV,OAGEuB,MAAOvB,QAHT,UAMF,yBACGY,EAAa,IAAd,IADF,IAC4BZ,eAAD,WAAqC,IADhE,UAEGA,kCAFH,aAEGA,OAAD,QAEF,uCAEF,yBACE,yBACGA,2BACC,yBACE,iCACA,yBACE,uBACEsB,OAAQtB,gCADV,OAEEwB,KAFF,KAIA,yBACE,yBAAexB,gCAAD,QACd,yBACGyB,YAAazB,mCAAd,qBAXV,EAiBCA,gCACC,yBACE,+BACA,yBACE,uBACEsB,OAAQtB,qCADV,OAEEwB,KAFF,KAIA,yBACE,yBACGxB,qCAAD,QAEF,yBACGyB,YAAazB,wCAAd,qBAbV,GAoBF,yBACE,iCACA,yBAAY,IAEd,yBACE,mCACA,yBAAaA,eAAD,aAEd,yBACE,kCACA,yBAAaA,eAAD,aAEbA,OACC,yBACE,gCACA,yBAAaA,OAAD,IAAZ,cAHJ,KAMA,yBACE,yCACA,6BAAcA,EAAD,OAEf,yBACE,2CACA,yBACE,EAAW,IACX,qBAAamB,SA1IH,EA0IV,EA1IiC,KAC7C,IACOO,8BAAL,GACAC,8BACA,MAAOC,GACPC,qBAsIY,qBAAUT,KAAV,cAMV,yBACE,uBACEU,KAAMC,YAAe,KAAMC,EAD7B,GAEEC,OAFF,SAGEC,IAHF,8BAIEC,UAJF,UAKE,qBAAgBC,WAAhB,qCAvJc,O","file":"3.bundle.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","import React, { FunctionComponent, useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { styled } from '@linaria/react';\nimport { unwrapResult } from '@reduxjs/toolkit';\nimport * as web3 from '@solana/web3.js';\nimport dayjs from 'dayjs';\nimport { rgba } from 'polished';\n\nimport { Transaction } from 'api/transaction/Transaction';\nimport { AmountUSD } from 'components/common/AmountUSD';\nimport { ToastManager } from 'components/common/ToastManager';\nimport { TokenAvatar } from 'components/common/TokenAvatar';\nimport { Button, Icon } from 'components/ui';\nimport { getTransaction } from 'store/slices/transaction/TransactionSlice';\nimport { getExplorerUrl } from 'utils/connection';\nimport { shortAddress } from 'utils/tokens';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  display: flex;\n  flex-basis: 524px;\n  flex-direction: column;\n  overflow: hidden;\n\n  background: #f6f6f8;\n\n  border-radius: 15px;\n`;\n\nconst Header = styled.div`\n  position: relative;\n\n  padding: 26px 20px 50px;\n\n  text-align: center;\n`;\n\nconst Title = styled.div`\n  margin-bottom: 10px;\n\n  color: #000;\n  font-weight: bold;\n  font-size: 20px;\n  line-height: 100%;\n`;\n\nconst Date = styled.div`\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 100%;\n`;\n\nconst CloseWrapper = styled.div`\n  position: absolute;\n  top: 15px;\n  right: 15px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n\n  background: #fff;\n  border-radius: 8px;\n\n  cursor: pointer;\n`;\n\nconst CloseIcon = styled(Icon)`\n  width: 16px;\n  height: 16px;\n\n  color: #a3a5ba;\n`;\n\nconst BlockWrapper = styled.div`\n  position: absolute;\n  bottom: -28px;\n  left: 50%;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 55px;\n  height: 55px;\n  margin-left: -27px;\n\n  background: #5887ff;\n  border-radius: 12px;\n`;\n\nconst BlockIcon = styled(Icon)`\n  width: 25px;\n  height: 25px;\n\n  color: #fff;\n`;\n\nconst Content = styled.div`\n  background: #fff;\n  border-radius: 0 0 15px 15px;\n`;\n\nconst StatusWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 40px 0 20px;\n`;\n\nconst ValueCurrency = styled.div`\n  color: #000;\n  font-weight: 600;\n  font-size: 28px;\n  line-height: 120%;\n`;\n\nconst ValueOriginal = styled.div`\n  margin-top: 4px;\n\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 120%;\n`;\n\nconst Status = styled.div`\n  display: flex;\n  align-items: center;\n  height: 32px;\n  margin-top: 20px;\n  padding: 6px 12px;\n\n  color: #17971d;\n  font-weight: 600;\n  font-size: 13px;\n  line-height: 20px;\n\n  background: rgba(45, 181, 51, 0.3);\n  border-radius: 10px;\n`;\n\nconst FieldsWrapper = styled.div``;\n\nconst FieldWrapper = styled.div`\n  padding: 16px 30px;\n\n  &:first-child {\n    border-top: 1px solid ${rgba('#000', 0.05)};\n  }\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ${rgba('#000', 0.05)};\n  }\n`;\n\nconst FieldRowWrapper = styled(FieldWrapper)`\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 36px;\n`;\n\nconst ColumnWrapper = styled.div``;\n\nconst FieldInfo = styled.div`\n  display: flex;\n  margin-top: 15px;\n`;\n\nconst FieldTitle = styled.div`\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 21px;\n`;\n\nconst FieldValue = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 3px;\n\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 21px;\n`;\n\nconst AddressWrapper = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  margin: 0 9px 0 12px;\n`;\n\nconst AddressTitle = styled.div`\n  color: #000;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 24px;\n`;\n\nconst AddressValue = styled.div`\n  margin-bottom: 5px;\n\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 16px;\n`;\n\nconst CopyIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: #a3a5ba;\n`;\n\nconst CopyWrapper = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  margin-left: 20px;\n\n  background: rgba(163, 165, 186, 0.1);\n  border-radius: 8px;\n  cursor: pointer;\n\n  &:hover {\n    background: #eff3ff;\n\n    ${CopyIcon} {\n      color: #5887ff;\n    }\n  }\n`;\n\nconst Footer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 85px;\n\n  background: #f6f6f8;\n`;\n\nconst ButtonExplorer = styled(Button)`\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 150%;\n`;\n\ntype Props = {\n  signature: web3.TransactionSignature;\n  close: () => void;\n};\n\nconst handleCopyClick = (publicKey: string) => () => {\n  try {\n    void navigator.clipboard.writeText(publicKey);\n    ToastManager.info('Copied to buffer!');\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nexport const TransactionDetailsModal: FunctionComponent<Props> = ({ signature, close }) => {\n  const dispatch = useDispatch();\n  const transaction = useSelector(\n    (state) =>\n      state.transaction.items[signature] && Transaction.from(state.transaction.items[signature]),\n  );\n  const cluster = useSelector((state) => state.wallet.cluster);\n  const tokenAccounts = useSelector((state) => state.wallet.tokenAccounts);\n\n  useEffect(() => {\n    const mount = async () => {\n      const trx = unwrapResult(await dispatch(getTransaction(signature)));\n\n      if (!trx) {\n        setTimeout(mount, 3000);\n      }\n    };\n\n    if (!transaction) {\n      void mount();\n    }\n  }, [signature]);\n\n  const isReceiver = useMemo(() => {\n    return tokenAccounts.find(\n      (tokenAccount) => tokenAccount.address === transaction.short.destination?.toBase58(),\n    );\n  }, [transaction.short.destination, tokenAccounts]);\n\n  if (!transaction) {\n    return null;\n  }\n\n  const date = transaction.timestamp\n    ? dayjs.unix(transaction.timestamp).format('LLL')\n    : `${transaction.slot} SLOT`;\n\n  return (\n    <Wrapper>\n      <Header>\n        <Title>{transaction.short.type}</Title>\n        <Date title={`${transaction.slot} SLOT`}>{date}</Date>\n        <CloseWrapper onClick={close}>\n          <CloseIcon name=\"close\" />\n        </CloseWrapper>\n        <BlockWrapper>\n          <BlockIcon name={isReceiver ? 'bottom' : 'top'} />\n        </BlockWrapper>\n      </Header>\n      <Content>\n        <StatusWrapper>\n          <ValueCurrency>\n            <AmountUSD\n              prefix={isReceiver ? '+' : '-'}\n              symbol={transaction.short.sourceTokenAccount?.mint.symbol}\n              value={transaction.short.amount}\n            />\n          </ValueCurrency>\n          <ValueOriginal>\n            {isReceiver ? '+' : '-'} {transaction.short.amount.toNumber()}{' '}\n            {transaction.short.sourceTokenAccount?.mint.symbol}\n          </ValueOriginal>\n          <Status>Completed</Status>\n        </StatusWrapper>\n        <FieldsWrapper>\n          <FieldRowWrapper>\n            {transaction.short.sourceTokenAccount ? (\n              <ColumnWrapper>\n                <FieldTitle>From</FieldTitle>\n                <FieldInfo>\n                  <TokenAvatar\n                    symbol={transaction.short.sourceTokenAccount.mint.symbol}\n                    size={48}\n                  />\n                  <AddressWrapper>\n                    <AddressTitle>{transaction.short.sourceTokenAccount.mint.symbol}</AddressTitle>\n                    <AddressValue>\n                      {shortAddress(transaction.short.sourceTokenAccount.address.toBase58())}\n                    </AddressValue>\n                  </AddressWrapper>\n                </FieldInfo>\n              </ColumnWrapper>\n            ) : undefined}\n            {transaction.short.destinationTokenAccount ? (\n              <ColumnWrapper>\n                <FieldTitle>To</FieldTitle>\n                <FieldInfo>\n                  <TokenAvatar\n                    symbol={transaction.short.destinationTokenAccount.mint.symbol}\n                    size={48}\n                  />\n                  <AddressWrapper>\n                    <AddressTitle>\n                      {transaction.short.destinationTokenAccount.mint.symbol}\n                    </AddressTitle>\n                    <AddressValue>\n                      {shortAddress(transaction.short.destinationTokenAccount.address.toBase58())}\n                    </AddressValue>\n                  </AddressWrapper>\n                </FieldInfo>\n              </ColumnWrapper>\n            ) : undefined}\n          </FieldRowWrapper>\n          <FieldWrapper>\n            <FieldTitle>Date</FieldTitle>\n            <FieldValue>{date}</FieldValue>\n          </FieldWrapper>\n          <FieldWrapper>\n            <FieldTitle>Amount</FieldTitle>\n            <FieldValue>{transaction.short.amount.toNumber()}</FieldValue>\n          </FieldWrapper>\n          <FieldWrapper>\n            <FieldTitle>Value</FieldTitle>\n            <FieldValue>{transaction.short.amount.toNumber()}</FieldValue>\n          </FieldWrapper>\n          {transaction.meta ? (\n            <FieldWrapper>\n              <FieldTitle>Fee</FieldTitle>\n              <FieldValue>{transaction.meta.fee} lamports</FieldValue>\n            </FieldWrapper>\n          ) : null}\n          <FieldWrapper>\n            <FieldTitle>Block number</FieldTitle>\n            <FieldValue>#{transaction.slot}</FieldValue>\n          </FieldWrapper>\n          <FieldWrapper>\n            <FieldTitle>Transaction ID</FieldTitle>\n            <FieldValue>\n              {signature}{' '}\n              <CopyWrapper onClick={handleCopyClick(signature)}>\n                <CopyIcon name=\"copy\" />\n              </CopyWrapper>\n            </FieldValue>\n          </FieldWrapper>\n        </FieldsWrapper>\n      </Content>\n      <Footer>\n        <a\n          href={getExplorerUrl('tx', signature, cluster)}\n          target=\"_blank\"\n          rel=\"noopener noreferrer noindex\"\n          className=\"button\">\n          <ButtonExplorer secondary>View in blockchain explorer</ButtonExplorer>\n        </a>\n      </Footer>\n    </Wrapper>\n  );\n};\n"],"sourceRoot":""}